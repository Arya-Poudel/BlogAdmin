(this["webpackJsonpblog-frontend-admin"]=this["webpackJsonpblog-frontend-admin"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),o=n(16),r=n.n(o),i=(n(22),n(23),n(5)),a=n(0),l=function(){return Object(a.jsxs)("nav",{className:"navbar ",children:[Object(a.jsx)(i.b,{to:"/blogs",className:"navlink",children:"BLOGS"}),Object(a.jsx)("button",{className:"linkBtn",onClick:function(){localStorage.clear(),window.location.href="/"},children:"Logout"})]})},j=n(2),d=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),r=Object(j.a)(o,2),i=r[0],l=r[1];JSON.parse(localStorage.getItem("token"))&&(window.location.href="/blogs");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{id:"login_form",onSubmit:function(e){e.preventDefault();var t=new FormData(document.getElementById("login_form"));fetch("https://hidden-eyrie-46633.herokuapp.com/beAdmin/",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(t))}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){l(e.message),e.token&&localStorage.setItem("token",JSON.stringify(e.token))})).catch((function(e){return s(e.message)}))},className:"form_div",children:[Object(a.jsx)("label",{htmlFor:"Adminname",children:"Adminname:"}),Object(a.jsx)("input",{type:"text",id:"Adminname",name:"Adminname",required:!0}),Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("input",{type:"password",id:"password",name:"password",required:!0}),Object(a.jsx)("button",{type:"submit",className:"linkBtn",children:"LOGIN"})]}),Object(a.jsx)("p",{className:"message-post",children:i}),n&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:n})]})},b=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),r=Object(j.a)(o,2),l=r[0],d=r[1];return console.log(localStorage.getItem("token")),Object(c.useEffect)((function(){fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs",{mode:"cors",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){return s(e)})).catch((function(e){return d(e.message)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:" BlogList "}),!l&&Object(a.jsxs)("div",{children:[n.map((function(e){return Object(a.jsx)(i.b,{to:"/blogs/".concat(e._id),className:"link",children:Object(a.jsxs)("div",{className:"blog",children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:e.title}),Object(a.jsxs)("p",{className:"blogDesc",children:[e.truncated_text," ......"]})]})},e._id)})),Object(a.jsx)(i.b,{to:"/blogs/new",children:Object(a.jsx)("button",{className:"linkBtn",children:"Create a New Blog"})})]}),l&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:l})]})},h=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),r=Object(j.a)(o,2),i=r[0],l=r[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{id:"create_blog_form",onSubmit:function(e){e.preventDefault();var t=new FormData(document.getElementById("create_blog_form"));console.log({formdata:t}),fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/new",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("token"))},body:JSON.stringify(Object.fromEntries(t))}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){return l(e.message)})).catch((function(e){return s(e.message)}))},className:"form_div",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(a.jsx)("input",{type:"text",id:"title",name:"title",required:!0}),Object(a.jsx)("label",{htmlFor:"text",children:"Text:"}),Object(a.jsx)("input",{type:"text",id:"text",name:"text",minLength:"10",required:!0}),Object(a.jsxs)("div",{children:["IsPublished:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"true",name:"ispublished",value:"true"}),Object(a.jsx)("label",{htmlFor:"true",children:"True"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"false",name:"ispublished",value:"false",defaultChecked:"true"}),Object(a.jsx)("label",{htmlFor:"false",children:"False"}),Object(a.jsx)("br",{})]}),Object(a.jsx)("button",{type:"submit",className:"linkBtn",children:"Submit"})]}),Object(a.jsx)("p",{className:"message-post",children:i}),n&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:n})]})},u=function(e){var t=e.blogId,n=Object(c.useState)({}),s=Object(j.a)(n,2),o=s[0],r=s[1],l=Object(c.useState)(""),d=Object(j.a)(l,2),b=d[0],h=d[1],u=Object(c.useState)(""),m=Object(j.a)(u,2),O=m[0],x=m[1];return Object(c.useEffect)((function(){fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/".concat(t),{mode:"cors",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){r(e),h(e.postedBy.Adminname)})).catch((function(e){return x(e.message)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[!O&&Object(a.jsxs)("div",{className:"blog",children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:o.title}),Object(a.jsxs)("h2",{children:["isPublished: ",String(o.isPublished)]}),Object(a.jsx)("p",{className:"blogDesc",children:o.text}),Object(a.jsxs)("div",{className:"blogDetails",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Date:"})," ",o.time]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Postedby:"})," ",b]})]}),Object(a.jsxs)("div",{className:"btn-links",children:[Object(a.jsx)(i.b,{to:"/blogs/".concat(o._id,"/comments/"),children:Object(a.jsx)("button",{className:"linkBtn",children:"Show Comments"})}),Object(a.jsx)(i.b,{to:"/blogs/".concat(o._id,"/edit/"),children:Object(a.jsx)("button",{className:"linkBtn",children:"Edit Blog"})}),Object(a.jsx)(i.b,{to:"/blogs/".concat(o._id,"/delete/"),children:Object(a.jsx)("button",{className:"linkBtn",children:"Delete Blog"})})]})]}),O&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:O})]})},m=function(e){var t=e.blogId,n=Object(c.useState)([]),s=Object(j.a)(n,2),o=s[0],r=s[1],l=Object(c.useState)(""),d=Object(j.a)(l,2),b=d[0],h=d[1],u=Object(c.useState)(""),m=Object(j.a)(u,2),O=m[0],x=m[1];return Object(c.useEffect)((function(){fetch("https://hidden-eyrie-46633.herokuapp.com/blogs/".concat(t,"/comments"),{mode:"cors",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){r(e),h(e[0].writtenIn.title)})).catch((function(e){return x(e.message)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[!O&&Object(a.jsxs)("div",{className:"blogcomments ",children:[Object(a.jsxs)("h1",{style:{textAlign:"center"},children:["Comments-",b]}),o.map((function(e){return Object(a.jsxs)("div",{className:"blogcomment",children:[Object(a.jsx)("h2",{children:e.name}),Object(a.jsx)("p",{children:e.comment}),Object(a.jsx)(i.b,{to:"/blogs/comments/".concat(e._id,"/delete"),className:"linkBtn-link",children:Object(a.jsx)("button",{className:"linkBtn",children:"Delete this comment."})})]},e._id)}))]}),O&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:O})]})},O=function(e){var t=e.commentId,n=Object(c.useState)({}),s=Object(j.a)(n,2),o=s[0],r=s[1],i=Object(c.useState)(""),l=Object(j.a)(i,2),d=l[0],b=l[1];return Object(c.useEffect)((function(){fetch("http://localhost:5000/admin/blogs/comments/".concat(t,"/delete"),{mode:"cors",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){return r(e)})).catch((function(e){return b(e.message)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:"Are you sure you want to delete this comment?"}),Object(a.jsx)("p",{children:o.name}),Object(a.jsx)("p",{children:o.comment}),Object(a.jsx)("p",{children:o.time}),Object(a.jsx)("button",{onClick:function(){fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/comments/".concat(t,"/delete"),{mode:"cors",method:"DELETE",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){window.location.href="/blogs"})).catch((function(e){return b(e.message)}))},className:"linkBtn",children:"Yes,delete"}),d&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:d})]})},x=function(e){var t=e.blogId,n=Object(c.useState)(""),s=Object(j.a)(n,2),o=s[0],r=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:"Are you sure you want to delete this blog?"}),Object(a.jsx)("button",{onClick:function(){fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/".concat(t,"/delete"),{mode:"cors",method:"DELETE",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){window.location.href="/blogs"})).catch((function(e){return r(e.message)}))},className:"linkBtn",children:"Yes,delete"}),o&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:o})]})},f=function(e){var t=e.blogId,n=Object(c.useState)({}),s=Object(j.a)(n,2),o=s[0],r=s[1],i=Object(c.useState)(""),l=Object(j.a)(i,2),d=l[0],b=l[1],h=Object(c.useState)(""),u=Object(j.a)(h,2),m=u[0],O=u[1];return Object(c.useEffect)((function(){fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/".concat(t),{mode:"cors",headers:{Authorization:JSON.parse(localStorage.getItem("token"))}}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){return r(e)})).catch((function(e){return b(e.message)}))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{id:"edit_blog_form",onSubmit:function(e){e.preventDefault();var n=new FormData(document.getElementById("edit_blog_form"));fetch("https://hidden-eyrie-46633.herokuapp.com/admin/blogs/".concat(t),{method:"PUT",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("token"))},body:JSON.stringify(Object.fromEntries(n))}).then((function(e){if(!e.ok)throw new Error("ERROR: HTTP status "+e.status);return e.json()})).then((function(e){return O(e.message)})).catch((function(e){return O(e.message)}))},className:"form_div",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(a.jsx)("input",{type:"text",id:"title",name:"title",defaultValue:o.title,required:!0}),Object(a.jsx)("label",{htmlFor:"text",children:"Text:"}),Object(a.jsx)("input",{type:"text",id:"text",name:"text",minLength:"10",defaultValue:o.text,required:!0}),Object(a.jsxs)("div",{children:["IsPublished:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"true",name:"ispublished",value:"true",defaultChecked:o.isPublished}),Object(a.jsx)("label",{htmlFor:"true",children:"True"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"false",name:"ispublished",value:"false",defaultChecked:!o.isPublished}),Object(a.jsx)("label",{htmlFor:"false",children:"False"}),Object(a.jsx)("br",{})]}),Object(a.jsx)("button",{type:"submit",className:"linkBtn",children:"Submit"})]}),Object(a.jsx)("p",{className:"message-post",children:m}),d&&Object(a.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:d})]})},g=n(3);var p=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(i.a,{basename:"/",children:[Object(a.jsx)(l,{}),Object(a.jsxs)(g.c,{children:[Object(a.jsx)(g.a,{exact:!0,path:"/",component:d}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs",component:b}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/new",component:h}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/:id",render:function(e){return Object(a.jsx)(u,{blogId:e.match.params.id})}}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/:id/comments",render:function(e){return Object(a.jsx)(m,{blogId:e.match.params.id})}}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/:id/edit",render:function(e){return Object(a.jsx)(f,{blogId:e.match.params.id})}}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/:id/delete",render:function(e){return Object(a.jsx)(x,{blogId:e.match.params.id})}}),Object(a.jsx)(g.a,{exact:!0,path:"/blogs/comments/:id/delete",render:function(e){return Object(a.jsx)(O,{commentId:e.match.params.id})}})]})]})})};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.6235b376.chunk.js.map